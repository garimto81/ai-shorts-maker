# 🔍 스크립트 자동 생성 기능 디버깅 가이드

## ✅ 검증 완료 사항

모든 코드와 로직이 정상적으로 구현되어 있습니다:
- ✅ API 엔드포인트: `/api/scripts/auto-generate` 정상
- ✅ UI 컴포넌트: `handleAutoGenerate` 함수 정상  
- ✅ AI 로직: Gemini AI 호출 및 파싱 정상
- ✅ 환경변수: GEMINI_API_KEY 설정 정상

## 🚨 실제 문제 해결 단계

### 1. 서버 실행 확인

```bash
# 1) 기존 프로세스 종료
taskkill /f /im node.exe

# 2) 서버 재시작 (다른 포트 시도)
npm run dev -- --port 4000
# 또는
npm run dev -- --port 5000
```

### 2. 브라우저에서 실제 테스트

1. **개발자 도구 열기**: `F12` 키
2. **Console 탭** 확인 - 오류 메시지 체크
3. **Network 탭** 확인 - API 호출 모니터링

### 3. 단계별 디버깅

#### 단계 1: 버튼 활성화 확인
```
✅ 본문 입력란에 "자동차 정비 작업을 진행합니다. 오늘은 특별한 케이스입니다." (10자 이상) 입력
✅ "🤖 AI 자동 생성" 버튼이 나타나는지 확인
```

#### 단계 2: API 호출 확인
```
✅ 버튼 클릭 시 "생성 중..." 로딩 상태 표시되는지 확인
✅ Network 탭에서 POST /api/scripts/auto-generate 요청 확인
✅ 응답 코드가 200 OK인지 확인
```

#### 단계 3: 응답 데이터 확인
```
✅ Network 탭에서 API 응답 내용 확인:
{
  "success": true,
  "data": {
    "title": "생성된 제목",
    "description": "생성된 설명",
    "category": "튜토리얼",
    "tags": ["태그1", "태그2"]
    ...
  }
}
```

#### 단계 4: 폼 업데이트 확인
```
✅ 제목 필드에 AI가 생성한 제목이 자동 입력되는지 확인
✅ 설명 필드에 AI가 생성한 설명이 자동 입력되는지 확인
✅ 카테고리가 자동 선택되는지 확인
✅ 태그 필드에 쉼표로 구분된 태그들이 입력되는지 확인
```

## 🔧 일반적인 문제와 해결법

### 문제 1: 버튼이 나타나지 않음
**원인**: 입력한 텍스트가 10자 미만
**해결**: 본문을 10자 이상 입력

### 문제 2: 버튼 클릭 시 아무 반응 없음
**원인**: JavaScript 오류 또는 API 서버 미실행
**해결**: 
1. Console 탭에서 오류 확인
2. 서버 재시작 (`npm run dev`)

### 문제 3: API 호출은 되지만 폼이 채워지지 않음
**원인**: API 응답 구조 문제 또는 setFormData 오류
**해결**:
1. Network 탭에서 API 응답 데이터 구조 확인
2. Console에서 JavaScript 오류 확인

### 문제 4: API 호출 실패 (500 에러)
**원인**: 서버 환경변수 또는 Gemini AI 연결 문제
**해결**:
1. `.env.local` 파일에서 `GEMINI_API_KEY` 확인
2. 서버 재시작

## 🎯 정확한 사용법

### 1. 서버 시작
```bash
npm run dev
```

### 2. 브라우저에서 접속
```
http://localhost:3000/scripts
```

### 3. 스크립트 등록 탭으로 이동
"새 스크립트 등록" 탭 클릭

### 4. 본문 입력
스크립트 본문 필드에 다음과 같이 입력:
```
오늘 입고된차는 sm6 차량입니다. 차주분이 휠복원 자체를 고민하시다 입고해주셨는데요. 휠 상태를 확인해보니 스크래치와 손상이 꽤 심한 편이었습니다. 복원 작업을 시작해서 연마와 도색을 통해 새것같이 만들어보겠습니다.
```

### 5. AI 자동 생성 실행
"🤖 AI 자동 생성" 버튼 클릭

### 6. 결과 확인
- 제목, 설명, 카테고리, 태그 등이 자동으로 채워짐
- 필요시 수정 후 "스크립트 등록" 버튼으로 최종 저장

## 📞 추가 지원

위 단계를 모두 따라했는데도 문제가 해결되지 않으면:

1. **브라우저 캐시 삭제**: Ctrl + Shift + Delete
2. **다른 브라우저에서 테스트**: Chrome, Firefox, Edge
3. **서버 로그 확인**: 터미널에서 에러 메시지 확인
4. **포트 변경**: `npm run dev -- --port 4000`

## 🎉 성공 확인

다음과 같이 작동하면 성공입니다:

1. ✅ 본문 입력 → AI 버튼 나타남
2. ✅ 버튼 클릭 → "생성 중..." 표시
3. ✅ 2-5초 후 → 모든 필드 자동 채움
4. ✅ 알림 메시지: "AI가 메타데이터를 성공적으로 생성했습니다! (신뢰도: 95%)"