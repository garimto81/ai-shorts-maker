<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì •ë ¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        h1 {
            color: #333;
            text-align: center;
        }
        .sorting-demo {
            background: white;
            padding: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        .file-list {
            margin: 20px 0;
        }
        .file-item {
            padding: 10px;
            margin: 5px 0;
            background: #f0f0f0;
            border-radius: 4px;
            display: flex;
            align-items: center;
            cursor: move;
        }
        .file-item.dragging {
            opacity: 0.5;
        }
        .file-number {
            width: 30px;
            height: 30px;
            background: #007bff;
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-right: 10px;
            font-weight: bold;
        }
        .buttons {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 20px;
        }
        button {
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }
        button.active {
            background-color: #007bff;
            color: white;
        }
        button:not(.active) {
            background-color: #e0e0e0;
            color: #333;
        }
        button:hover:not(.active) {
            background-color: #d0d0d0;
        }
        .mode-info {
            background: #e3f2fd;
            padding: 10px;
            border-radius: 4px;
            margin-bottom: 20px;
            font-size: 14px;
        }
        input[type="number"] {
            width: 50px;
            padding: 5px;
            margin-left: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        .test-info {
            background: #fff3cd;
            padding: 15px;
            border-radius: 4px;
            margin-bottom: 20px;
            border: 1px solid #ffeaa7;
        }
    </style>
</head>
<body>
    <h1>AI Shorts Maker - ì •ë ¬ ê¸°ëŠ¥ í…ŒìŠ¤íŠ¸</h1>
    
    <div class="sorting-demo">
        <div class="test-info">
            <strong>í…ŒìŠ¤íŠ¸ ì•ˆë‚´:</strong> ì´ê²ƒì€ ì •ë ¬ ê¸°ëŠ¥ì´ ì •ìƒì ìœ¼ë¡œ ì‘ë™í•˜ëŠ”ì§€ í™•ì¸í•˜ê¸° ìœ„í•œ ë°ëª¨ì…ë‹ˆë‹¤.<br>
            ì‹¤ì œ ë°°í¬ëœ ë²„ì „ì—ì„œë„ ë™ì¼í•œ ê¸°ëŠ¥ì´ ì‘ë™í•´ì•¼ í•©ë‹ˆë‹¤.
        </div>

        <div class="buttons">
            <button onclick="setSortMode('desc')" id="desc-btn" class="active">íŒŒì¼ëª… ë‚´ë¦¼ì°¨ìˆœ (Zâ†’A)</button>
            <button onclick="setSortMode('asc')" id="asc-btn">íŒŒì¼ëª… ì˜¤ë¦„ì°¨ìˆœ (Aâ†’Z)</button>
            <button onclick="setSortMode('manual')" id="manual-btn">ë“œë˜ê·¸ë¡œ ìˆœì„œ ë³€ê²½</button>
            <button onclick="setSortMode('number')" id="number-btn">ë²ˆí˜¸ ì§ì ‘ ì…ë ¥</button>
        </div>

        <div class="mode-info" id="mode-info">
            í˜„ì¬ ëª¨ë“œ: íŒŒì¼ëª… ë‚´ë¦¼ì°¨ìˆœ
        </div>

        <div class="file-list" id="file-list"></div>
    </div>

    <script>
        // ìƒ˜í”Œ íŒŒì¼ ë°ì´í„°
        let files = [
            { name: 'image_001.jpg' },
            { name: 'photo_abc.png' },
            { name: 'picture_xyz.jpg' },
            { name: 'ì‚¬ì§„_ê°€.jpg' },
            { name: 'ê·¸ë¦¼_ë‚˜.png' },
            { name: 'file_999.gif' },
            { name: 'img_010.webp' },
            { name: 'snapshot_zzz.jpg' }
        ];

        let currentMode = 'desc';
        let draggedItem = null;

        // ì •ë ¬ í•¨ìˆ˜ë“¤
        function sortDesc(files) {
            return [...files].sort((a, b) => 
                b.name.localeCompare(a.name, 'ko-KR', { numeric: true, sensitivity: 'base' })
            );
        }

        function sortAsc(files) {
            return [...files].sort((a, b) => 
                a.name.localeCompare(b.name, 'ko-KR', { numeric: true, sensitivity: 'base' })
            );
        }

        // ì •ë ¬ ëª¨ë“œ ì„¤ì •
        function setSortMode(mode) {
            currentMode = mode;
            
            // ë²„íŠ¼ í™œì„±í™” ìƒíƒœ ì—…ë°ì´íŠ¸
            document.querySelectorAll('button').forEach(btn => btn.classList.remove('active'));
            document.getElementById(mode + '-btn').classList.add('active');
            
            // ëª¨ë“œ ì •ë³´ ì—…ë°ì´íŠ¸
            const modeTexts = {
                'desc': 'íŒŒì¼ëª… ë‚´ë¦¼ì°¨ìˆœ',
                'asc': 'íŒŒì¼ëª… ì˜¤ë¦„ì°¨ìˆœ',
                'manual': 'ë“œë˜ê·¸ ì •ë ¬',
                'number': 'ë²ˆí˜¸ ì…ë ¥ ì •ë ¬'
            };
            
            const modeInfo = document.getElementById('mode-info');
            modeInfo.textContent = `í˜„ì¬ ëª¨ë“œ: ${modeTexts[mode]}`;
            
            if (mode === 'manual') {
                modeInfo.innerHTML += '<br>ğŸ’¡ íŒŒì¼ì„ ë“œë˜ê·¸í•˜ì—¬ ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            } else if (mode === 'number') {
                modeInfo.innerHTML += '<br>ğŸ”¢ ê° íŒŒì¼ì˜ ë²ˆí˜¸ë¥¼ ì§ì ‘ ì…ë ¥í•˜ì—¬ ìˆœì„œë¥¼ ë³€ê²½í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.';
            }
            
            // ì •ë ¬ ì ìš©
            if (mode === 'desc') {
                files = sortDesc(files);
            } else if (mode === 'asc') {
                files = sortAsc(files);
            }
            
            renderFiles();
        }

        // íŒŒì¼ ëª©ë¡ ë Œë”ë§
        function renderFiles() {
            const fileList = document.getElementById('file-list');
            fileList.innerHTML = '';
            
            files.forEach((file, index) => {
                const item = document.createElement('div');
                item.className = 'file-item';
                item.draggable = currentMode === 'manual';
                
                item.innerHTML = `
                    <div class="file-number">${index + 1}</div>
                    <div style="flex: 1;">${file.name}</div>
                    ${currentMode === 'number' ? 
                        `<input type="number" min="1" max="${files.length}" value="${index + 1}" 
                         onchange="handleNumberChange(${index}, this.value)">` : ''}
                `;
                
                if (currentMode === 'manual') {
                    item.addEventListener('dragstart', handleDragStart);
                    item.addEventListener('dragover', handleDragOver);
                    item.addEventListener('drop', handleDrop);
                    item.addEventListener('dragend', handleDragEnd);
                }
                
                fileList.appendChild(item);
            });
        }

        // ë²ˆí˜¸ ì…ë ¥ ì²˜ë¦¬
        function handleNumberChange(currentIndex, newPosition) {
            const position = parseInt(newPosition);
            if (isNaN(position) || position < 1 || position > files.length) return;
            
            const targetIndex = position - 1;
            if (currentIndex === targetIndex) return;
            
            const [movedFile] = files.splice(currentIndex, 1);
            files.splice(targetIndex, 0, movedFile);
            renderFiles();
        }

        // ë“œë˜ê·¸ ì•¤ ë“œë¡­ ì²˜ë¦¬
        function handleDragStart(e) {
            draggedItem = this;
            this.classList.add('dragging');
        }

        function handleDragOver(e) {
            e.preventDefault();
            const afterElement = getDragAfterElement(e.currentTarget.parentNode, e.clientY);
            if (afterElement == null) {
                e.currentTarget.parentNode.appendChild(draggedItem);
            } else {
                e.currentTarget.parentNode.insertBefore(draggedItem, afterElement);
            }
        }

        function handleDrop(e) {
            e.preventDefault();
            updateFilesOrder();
        }

        function handleDragEnd(e) {
            this.classList.remove('dragging');
            draggedItem = null;
        }

        function getDragAfterElement(container, y) {
            const draggableElements = [...container.querySelectorAll('.file-item:not(.dragging)')];
            
            return draggableElements.reduce((closest, child) => {
                const box = child.getBoundingClientRect();
                const offset = y - box.top - box.height / 2;
                
                if (offset < 0 && offset > closest.offset) {
                    return { offset: offset, element: child };
                } else {
                    return closest;
                }
            }, { offset: Number.NEGATIVE_INFINITY }).element;
        }

        function updateFilesOrder() {
            const items = document.querySelectorAll('.file-item');
            const newFiles = [];
            items.forEach((item, index) => {
                const fileName = item.querySelector('div:nth-child(2)').textContent;
                const file = files.find(f => f.name === fileName);
                if (file) newFiles.push(file);
            });
            files = newFiles;
            renderFiles();
        }

        // ì´ˆê¸° ë Œë”ë§
        setSortMode('desc');
    </script>
</body>
</html>