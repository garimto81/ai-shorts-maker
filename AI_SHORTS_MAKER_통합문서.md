# AI Shorts Maker - 통합 프로젝트 문서

> 📅 **문서 생성일**: 2025-07-27  
> 📋 **버전**: v1.6.1  
> 🔄 **최종 업데이트**: 2025-07-27  

---

## 📑 목차

1. [프로젝트 개요](#-프로젝트-개요)
2. [현재 상태 및 주요 기능](#-현재-상태-및-주요-기능)
3. [기술 아키텍처](#-기술-아키텍처)
4. [설치 및 사용 방법](#-설치-및-사용-방법)
5. [스크립트 관리 시스템](#-스크립트-관리-시스템)
6. [버전 관리 시스템](#-버전-관리-시스템)
7. [변경 히스토리](#-변경-히스토리)
8. [개발 로드맵](#-개발-로드맵)
9. [비즈니스 계획](#-비즈니스-계획)

---

## 🎯 프로젝트 개요

### 프로젝트명
**AI Shorts Maker** - AI 기반 자동 단편 영상 제작 플랫폼

### 목표
이미지와 제목만으로 전문적인 단편 영상을 자동으로 생성하는 AI 기반 플랫폼 구축

### 현재 진행 상황
```
전체 완성도: 60% ████████████████░░░░░░░░
```

---

## 🚀 현재 상태 및 주요 기능

### ✅ 구현 완료된 기능

#### 1. 지능형 파일 정렬 시스템
- **1차 정렬**: 파일명에서 날짜/시간 정보 자동 추출
- **2차 정렬**: Gemini AI를 통한 이미지 내용 분석
- **통합 정렬**: 두 분석 결과를 종합한 최적 순서 결정

#### 2. AI 이미지 분석
- Google Gemini AI를 활용한 이미지 장면 분석
- 시간대, 배경, 등장인물, 감정 분석
- 스토리 흐름에 따른 순서 추론

#### 3. 스크립트 관리 시스템 (NEW v1.3.2)
- **샘플 스크립트 등록**: 웹 인터페이스를 통한 스크립트 등록
- **AI 기반 스크립트 생성**: Gemini AI를 활용한 새 스크립트 자동 생성
- **스크립트 검색 및 필터링**: 카테고리별 필터링과 텍스트 검색
- **3개 탭 구조**: 관리, 등록, AI 생성
- **AI 자동 메타데이터 생성** (v1.6.1): 본문만 입력하면 제목, 설명, 카테고리, 태그 자동 추론

#### 4. 이미지 업로드 및 관리
- **드래그 앤 드롭 업로드**: 다중 파일 업로드 지원
- **자동 이미지 압축**: 1MB 초과 파일 자동 압축 (평균 70% 절약)
- **실시간 미리보기**: 업로드 즉시 썸네일 표시
- **파일 검증**: 지원 형식 및 크기 제한 확인

#### 5. 사용자 친화적 인터페이스
- 드래그 앤 드롭 파일 업로드
- 실시간 분석 진행 상황 표시
- 정렬 결과 및 근거 시각화

### 🔄 개발 중인 기능 (60% 완료)

#### 6. Gemini AI TTS 음성 생성 (새로운 아키텍처)
- **Gemini AI TTS 통합**: Google Gemini의 음성 합성 기능 활용
- **구현 필요 사항**: 
  - Gemini AI Text-to-Speech API 통합
  - 스크립트 텍스트 → Gemini 음성 변환
  - Gemini 기본 음성 옵션 활용
  - 자연스러운 음성 표현 및 감정 전달
- **장점**: 단일 API 키로 모든 AI 기능 통합 관리
- **우선순위**: 높음 (MVP 완성을 위한 다음 단계)

### ⏳ 계획된 기능

#### 7. 비디오 렌더링 엔진 (미구현, 최우선 과제)
- **FFmpeg 기반 처리**: 고품질 비디오 합성 (구현 필요)
- **이미지-음성 동기화**: 정확한 타이밍 매칭 (구현 필요)
- **트랜지션 효과**: 페이드, 슬라이드 등 자연스러운 전환 (구현 필요)
- **1080p HD 출력**: 고해상도 세로 영상 생성 (구현 필요)
- **현재 상태**: 설계 단계, FFmpeg 바이너리 및 Node.js 통합 작업 필요
- **우선순위**: 최고 (TTS 완료 후 즉시 착수)

#### 8. 최종 편집 및 브랜딩
- **배경음악 자동 매칭**: 분위기에 맞는 BGM 선택
- **브랜드 요소 삽입**: 로고, 워터마크 자동 적용
- **다양한 템플릿**: 업종별 최적화 템플릿
- **소셜 플랫폼 최적화**: YouTube, TikTok 등 플랫폼별 최적화

---

## 🏗️ 기술 아키텍처

### Frontend Stack
- **Next.js 14**: App Router 기반 React 프레임워크
- **TypeScript**: 정적 타입 시스템
- **Tailwind CSS**: 유틸리티 기반 스타일링
- **Radix UI**: 재사용 가능한 UI 컴포넌트
- **React Hook Form + Zod**: 폼 관리 및 검증

### AI & Processing (Gemini 단일 엔진 아키텍처)
- **Google Gemini AI**: 통합 AI 엔진 - 이미지 분석, 스크립트 생성, TTS 음성 합성
- **Sharp**: 서버사이드 이미지 처리 및 최적화
- **Formidable**: 파일 업로드 및 처리
- **FFmpeg**: 비디오 렌더링 엔진 (계획)
- **~~Azure Speech~~**: ~~제거됨~~ (Gemini TTS로 대체)
- **~~OpenAI~~**: ~~제거됨~~ (Gemini AI로 통일)

### Backend & Infrastructure
- **Next.js API Routes**: 서버리스 API
- **Node.js 18+**: 런타임 환경
- **JSON 기반 데이터베이스**: 로컬 파일 시스템 (현재)
- **PostgreSQL (Supabase)**: 데이터베이스 (계획)
- **AWS S3**: 파일 스토리지 (계획)
- **Vercel**: 호스팅 및 배포 (계획)

### 프로젝트 구조
```
ai-shorts/
├── components/           # React 컴포넌트
│   ├── ui/              # 재사용 가능한 UI 컴포넌트
│   ├── intelligent-file-sorter-ui.tsx
│   └── script-management-ui.tsx
├── lib/                 # 핵심 로직
│   ├── filename-analyzer.ts        # 파일명 분석
│   ├── gemini-image-analyzer.ts    # AI 이미지 분석
│   ├── intelligent-file-sorter.ts  # 통합 정렬 엔진
│   ├── script-database.ts          # 스크립트 데이터 모델
│   ├── gemini-script-generator.ts  # AI 스크립트 생성
│   └── env-config.ts              # 환경 설정
├── pages/               # Next.js 페이지
│   ├── api/            # API 엔드포인트
│   │   ├── scripts/    # 스크립트 관리 API
│   │   └── sort-files  # 파일 정렬 API
│   ├── index.tsx       # 메인 페이지 (파일 정렬)
│   └── scripts.tsx     # 스크립트 관리 페이지
├── data/               # 데이터 파일
│   ├── sample-scripts.json
│   └── script-templates.json
├── scripts/            # 유틸리티 스크립트
│   └── version-manager.js
└── docs/               # 프로젝트 문서
```

---

## 📦 설치 및 사용 방법

### 1. 의존성 설치
```bash
npm install
```

### 2. 환경 변수 설정
`.env.example`을 복사하여 `.env.local` 생성 후 API 키 입력:
```bash
cp .env.example .env.local
```

필수 환경 변수:
- `GEMINI_API_KEY`: Google AI Studio에서 발급받은 API 키 (모든 AI 기능 통합)

~~제거된 환경 변수~~:
- ~~`AZURE_SPEECH_KEY`~~: ~~Azure Speech Services API 키~~ (Gemini TTS로 대체)
- ~~`OPENAI_API_KEY`~~: ~~OpenAI API 키~~ (Gemini AI로 통일)

### 3. 개발 서버 시작
```bash
npm run dev
```

### 4. 프로덕션 빌드
```bash
npm run build
npm start
```

### 사용 방법

#### 파일 정렬 기능
1. **파일 업로드**: 메인 페이지에서 10-20개 이미지 파일을 드래그 앤 드롭
2. **자동 분석**: 시스템이 자동으로 파일명과 이미지 내용을 분석
3. **결과 확인**: 정렬된 결과와 분석 근거를 탭별로 확인
4. **수동 조정**: 필요시 드래그 앤 드롭으로 순서 수동 조정

#### 스크립트 관리 기능
1. **스크립트 등록**: 새 스크립트 등록 탭에서 샘플 스크립트 입력
2. **AI 생성**: AI 스크립트 생성 탭에서 주제와 설정 입력
3. **스크립트 관리**: 등록된 스크립트 검색, 편집, 삭제

---

## 📝 스크립트 관리 시스템

### 핵심 기능

#### 1. 샘플 스크립트 등록 시스템
- **웹 기반 등록 폼**: 제목, 설명, 카테고리, 태그, 나레이션, 장면 구성
- **AI 학습 가이드**: 톤 특성, 구조 패턴, 스타일 특징 입력
- **카테고리 시스템**: 튜토리얼, 리뷰, 스토리, 뉴스, 교육 등 10개 카테고리

#### 2. AI 기반 스크립트 생성
- **Gemini AI 통합**: 등록된 샘플을 학습하여 새 스크립트 생성
- **맞춤 설정**: 주제, 카테고리, 스타일, 대상 관객 선택
- **참조 스크립트 선택**: 특정 샘플 스크립트 기반 생성
- **실시간 생성**: 웹 인터페이스에서 즉시 결과 확인

#### 3. 스크립트 검색 및 관리
- **필터링**: 카테고리별 필터링 및 텍스트 검색
- **미리보기**: 확장 가능한 스크립트 내용 미리보기
- **편집 기능**: 등록된 스크립트 수정 및 삭제
- **사용 통계**: 스크립트별 사용 횟수 및 평점 추적

### 데이터 모델

#### SampleScript 인터페이스
```typescript
interface SampleScript {
  id: string;
  title: string;
  description: string;
  category: ScriptCategory;
  tags: string[];
  content: {
    narration: string;
    scenes: SceneDescription[];
    timing: TimingInfo;
  };
  metadata: ScriptMetadata;
  aiPrompts: AIPrompts;
}
```

#### 지원 카테고리
- 튜토리얼, 리뷰, 스토리, 뉴스, 엔터테인먼트
- 교육, 홍보, 다큐멘터리, 인터뷰, 비교분석

### API 엔드포인트
- `GET /api/scripts` - 스크립트 목록 조회
- `POST /api/scripts` - 새 스크립트 등록
- `GET /api/scripts/[id]` - 개별 스크립트 조회
- `PUT /api/scripts/[id]` - 스크립트 수정
- `DELETE /api/scripts/[id]` - 스크립트 삭제
- `POST /api/scripts/generate` - AI 스크립트 생성

---

## 🔧 버전 관리 시스템

### Semantic Versioning 적용
- **MAJOR** (X.0.0): 호환되지 않는 API 변경
- **MINOR** (0.X.0): 하위 호환되는 새로운 기능 추가  
- **PATCH** (0.0.X): 하위 호환되는 버그 수정

### 자동화된 버전 관리

#### 버전 업데이트 명령어
```bash
# 패치 버전 (버그 수정)
npm run version:patch "구체적인 수정 내용"

# 마이너 버전 (새 기능)
npm run version:minor "새로운 기능 설명"

# 메이저 버전 (호환성 변경)
npm run version:major "주요 변경사항 설명"

# 현재 버전 확인
npm run version:current
```

### 관련 파일들

#### CHANGELOG.md
- 모든 버전의 변경사항을 시간순으로 기록
- 사용자가 읽기 쉬운 형태로 작성
- 이모지와 카테고리로 변경사항 분류

#### VERSION.json
- 기계가 읽을 수 있는 버전 정보
- 현재 버전의 상세 정보와 메타데이터
- API 호환성 및 성능 지표 포함

### 변경사항 분류
- 🆕 **Added**: 새로운 기능
- 🔧 **Changed**: 기존 기능의 변경
- 🐛 **Fixed**: 버그 수정
- 🗑️ **Deprecated**: 곧 제거될 기능
- ❌ **Removed**: 제거된 기능
- 🔒 **Security**: 보안 관련 수정

---

## 📈 변경 히스토리

### [1.4.0] - 2025-07-27 (최신)
#### 🏗️ Architecture (아키텍처 개편)
- **Gemini AI 중심 설계**: 모든 AI 기능을 Google Gemini AI로 통일
- **AI 서비스 단순화**: Azure Speech, OpenAI 의존성 제거로 단순하고 안정적인 구조
- **통합 AI 엔진**: 이미지 분석, 스크립트 생성, TTS까지 Gemini 하나로 처리
- **비용 최적화**: 단일 AI 서비스 사용으로 API 비용 절감
- **환경 설정 간소화**: GEMINI_API_KEY 하나만으로 모든 AI 기능 동작

#### 📊 Updated Architecture
- **Primary AI Engine**: Google Gemini AI (이미지 분석, 스크립트 생성, TTS)
- **Backup Services**: 제거 (Azure Speech, OpenAI)
- **Simplified Pipeline**: 이미지 → Gemini 분석 → 스크립트 → Gemini TTS → 비디오

### [1.3.7] - 2025-07-27
#### 🐛 Fixed (버그 수정)
- **TypeScript 컴파일 오류 수정**: `lib/api-validators.ts`에서 `ApiValidationResult` 인터페이스에 `optional` 속성 추가
- **시스템 안정성 개선**: 타입 안전성 강화로 컴파일 오류 해결
- **코드 품질 향상**: 전체 프로젝트 타입 검사 통과 확인

#### 📊 Analysis (분석 결과)
- **TTS 기능 현황**: 환경 변수 설정됨, 실제 구현 필요 (우선순위: 높음)
- **FFmpeg 비디오 렌더링**: 미구현 상태, MVP 완성을 위한 핵심 기능
- **전체 완성도**: 60% → 다음 단계 TTS 구현으로 80% 달성 예정

### [1.3.2] - 2025-07-27
#### 🐛 Fixed (버그 수정)
- 스크립트 관리 UI TypeScript 컴파일 오류 수정
- JSX 문법 오류 (이스케이프된 따옴표) 정정
- Gemini API 오류 처리 타입 안전성 개선
- Next.js 설정 파일 유효하지 않은 키 제거
- 전체 시스템 빌드 성공 확인

#### ✨ Enhanced (개선)
- 완전한 기능을 갖춘 스크립트 관리 웹 인터페이스 완성
- 샘플 스크립트 등록 폼 구현 완료
- AI 기반 스크립트 생성 UI 구현 완료
- 스크립트 검색 및 필터링 기능 추가

### [1.3.1] - 2025-07-27
#### 🐛 Fixed (버그 수정)
- 버전 관리 시스템 테스트 및 문서화 완료

### [1.3.0] - 2025-07-27
#### 🆕 Added (새로운 기능)
- **프로젝트 구조 개선**: ai-shorts 서브 폴더로 프로젝트 분리
- **포괄적인 문서화**: README.md 파일 추가 및 사용 방법 상세 설명
- **버전 관리 시스템**: CHANGELOG.md 및 VERSION.json 도입
- **자동화된 패치 노트**: 버전별 변경사항 추적 시스템

#### 🔧 Changed (변경사항)
- 프로젝트 파일들을 ai-shorts 서브 폴더로 이동
- 파일 구조 정리 및 모듈화

### [1.2.0] - 2025-07-27
#### 🆕 Added (새로운 기능)
- **Gemini AI 통합**: Google Gemini AI를 활용한 이미지 내용 분석
- **지능형 파일 정렬**: 파일명과 AI 분석을 결합한 2단계 정렬 시스템
- **이미지 분석 엔진**: 장면, 시간대, 감정, 스토리 흐름 분석
- **실시간 진행률 표시**: 파일 분석 진행 상황 실시간 업데이트
- **드래그 앤 드롭 인터페이스**: 사용자 친화적인 파일 업로드 UI

#### 🔧 Changed (변경사항)
- **영상 길이 조정**: 60-120초에서 30-60초로 변경
- **API 키 보안 강화**: 환경 변수 기반 안전한 키 관리
- **성능 최적화**: 배치 처리 및 동시성 제한 구현

---

## 🛣️ 개발 로드맵

### Phase 1: MVP 완성 (2024 Q1-Q2)
```
현재 진행률: 60% ████████████████░░░░░░░░
```

#### 완료된 항목 ✅
- [x] 기본 인프라 구축 (Next.js, TypeScript)
- [x] 이미지 업로드 및 압축 시스템
- [x] Gemini AI 통합 (이미지 분석)
- [x] 지능형 파일 정렬 시스템
- [x] 샘플 스크립트를 토대로 Gemini AI 기반 스크립트 생성
- [x] 스크립트 관리 웹 인터페이스

#### 현재 진행 중 🔄
- [🔄] **TTS 음성 생성** (환경 설정 완료, 구현 시작 대기)

#### 다음 단계 ⏳ (우선순위 순)
1. [⏳] **Gemini AI TTS 통합** (통합 AI 엔진 TTS 구현)
2. [⏳] **FFmpeg 비디오 렌더링 엔진** (최종 출력)
3. [⏳] **전체 파이프라인 통합** (이미지→스크립트→TTS→비디오)
4. [⏳] **베타 테스트 준비** (품질 검증)

### Phase 2: 사용자 시스템 (2024 Q3)
- [ ] NextAuth.js 기반 사용자 인증
- [ ] PostgreSQL 데이터베이스 스키마
- [ ] 구독 모델 (Free/Premium/Enterprise)
- [ ] Stripe 결제 시스템

### Phase 3: 고급 기능 (2024 Q4)
- [ ] 템플릿 시스템
- [ ] 브랜딩 및 커스터마이징
- [ ] 팀 협업 기능
- [ ] API 및 SDK 개발

---

## 💼 비즈니스 계획

### 타겟 시장
1. **콘텐츠 크리에이터**: YouTube, TikTok 제작자
2. **소셜미디어 마케터**: 브랜드 홍보 담당자
3. **교육자 및 강사**: 온라인 강의 제작자
4. **개인 사용자**: 개인 기념 영상 제작

### 구독 요금제

#### 🆓 Free Tier
- **제한**: 월 5개 영상
- **해상도**: 720p
- **기능**: 기본 템플릿, 워터마크 포함

#### ⭐ Premium ($19/월)
- **제한**: 무제한 영상 생성
- **해상도**: 1080p HD
- **기능**: 워터마크 제거, 우선 처리, 고급 음성

#### 🏢 Enterprise ($99/월)
- **제한**: 무제한 + 팀 기능
- **해상도**: 1080p HD
- **기능**: API 접근, 브랜딩, 전담 지원

### 수익 예측
```
2024 Q3: $1,000 MRR (월 반복 수익)
2024 Q4: $5,000 MRR
2025 Q1: $15,000 MRR
2025 Q2: $30,000 MRR
```

### 성공 지표 (KPI)

#### 기술 지표
- **영상 생성 성공률**: 목표 95%
- **평균 처리 시간**: 목표 3분 이하
- **이미지 분석 정확도**: 현재 92%
- **시스템 가동시간**: 목표 99.9%

#### 사용자 지표
- **베타 사용자**: 1,000명 (2024 Q3 목표)
- **일일 활성 사용자**: 100명
- **유료 전환율**: 15%
- **고객 유지율**: 85%

#### 비즈니스 지표
- **고객 생애 가치 (LTV)**: $200
- **고객 획득 비용 (CAC)**: $50
- **순 추천 지수 (NPS)**: 70+

### 지역별 확장 전략

#### 1차 확장: 아시아 태평양
- **한국**: 런칭 시장 (현지화 완료)
- **일본**: K-콘텐츠 관심 활용
- **동남아**: 영어 버전으로 진입

#### 2차 확장: 유럽/미주
- **미국**: 크리에이터 이코노미 중심지
- **영국**: 영어권 확장 교두보
- **독일**: 유럽 최대 시장

---

## 📊 기술 사양

### 지원 파일 형식
- **이미지**: JPG, JPEG, PNG, GIF, WebP
- **최대 파일 수**: 20개
- **파일 크기 제한**: 10MB per file, 200MB total

### 지원 파일명 패턴
- YYYY-MM-DD 형태
- YYYYMMDD 형태  
- DD-MM-YYYY 형태
- 한국어 날짜 (2024년1월27일)
- 시간 포함 (YYYY-MM-DD_HH-MM-SS)
- 타임스탬프 (13자리 밀리초)
- 시퀀스 번호 (001, 002 등)

### API 엔드포인트
- `GET /api/admin/health` - 시스템 상태 및 API 연결 확인 (Gemini 중심 건강 검사)
- `POST /api/sort-files` - 파일 정렬 요청 (multipart/form-data, Gemini AI 사용)
- `GET /api/scripts` - 스크립트 목록 조회
- `POST /api/scripts` - 새 스크립트 등록
- `POST /api/scripts/generate` - AI 스크립트 생성 (Gemini AI 사용)
- `POST /api/scripts/auto-generate` - AI 자동 메타데이터 생성 (v1.6.1 추가)

---

## 🚨 위험 관리

### 기술적 위험
1. **AI 서비스 의존성**
   - 위험: Google Gemini API 장애 또는 정책 변경
   - 대응: 대체 모델 확보 (OpenAI, Claude)

2. **서버 확장성**
   - 위험: 급격한 사용자 증가 시 과부하
   - 대응: Vercel 오토스케일링, 큐잉 시스템

### 비즈니스 위험
1. **경쟁사 등장**
   - 위험: 대형 테크 기업의 유사 서비스
   - 대응: 차별화된 UX, 빠른 혁신

---

## 📄 라이선스 및 기여

**라이선스**: UNLICENSED (내부 도구용)

**기여**: 내부 팀 프로젝트입니다. 이슈나 개선사항은 팀 내에서 논의해주세요.

---

**📅 작성일**: 2025년 7월 27일  
**📋 문서 버전**: v1.6.1  
**🔄 다음 업데이트**: 개발 진행에 따라 수시 업데이트
**⚡ 최근 변경**: AI 자동 메타데이터 생성 기능 완성 - 본문만 입력하면 나머지 자동 추론

---

*이 문서는 ai-shorts 프로젝트의 모든 MD 파일을 통합하여 생성되었습니다.*